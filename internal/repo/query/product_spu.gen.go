// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.

package query

import (
	"context"
	"database/sql"

	"gorm.io/gorm"
	"gorm.io/gorm/clause"
	"gorm.io/gorm/schema"

	"gorm.io/gen"
	"gorm.io/gen/field"

	"gorm.io/plugin/dbresolver"

	"backend-go/internal/model/product"
)

func newProductSpu(db *gorm.DB, opts ...gen.DOOption) productSpu {
	_productSpu := productSpu{}

	_productSpu.productSpuDo.UseDB(db, opts...)
	_productSpu.productSpuDo.UseModel(&product.ProductSpu{})

	tableName := _productSpu.productSpuDo.TableName()
	_productSpu.ALL = field.NewAsterisk(tableName)
	_productSpu.ID = field.NewInt64(tableName, "id")
	_productSpu.Name = field.NewString(tableName, "name")
	_productSpu.Keyword = field.NewString(tableName, "keyword")
	_productSpu.Introduction = field.NewString(tableName, "introduction")
	_productSpu.Description = field.NewString(tableName, "description")
	_productSpu.CategoryID = field.NewInt64(tableName, "category_id")
	_productSpu.BrandID = field.NewInt64(tableName, "brand_id")
	_productSpu.PicURL = field.NewString(tableName, "pic_url")
	_productSpu.SliderPicURLs = field.NewField(tableName, "slider_pic_urls")
	_productSpu.Sort = field.NewInt(tableName, "sort")
	_productSpu.Status = field.NewInt(tableName, "status")
	_productSpu.SpecType = field.NewBool(tableName, "spec_type")
	_productSpu.Price = field.NewInt(tableName, "price")
	_productSpu.MarketPrice = field.NewInt(tableName, "market_price")
	_productSpu.CostPrice = field.NewInt(tableName, "cost_price")
	_productSpu.Stock = field.NewInt(tableName, "stock")
	_productSpu.DeliveryTypes = field.NewField(tableName, "delivery_types")
	_productSpu.DeliveryTemplateID = field.NewInt64(tableName, "delivery_template_id")
	_productSpu.GiveIntegral = field.NewInt(tableName, "give_integral")
	_productSpu.SubCommissionType = field.NewBool(tableName, "sub_commission_type")
	_productSpu.SalesCount = field.NewInt(tableName, "sales_count")
	_productSpu.VirtualSalesCount = field.NewInt(tableName, "virtual_sales_count")
	_productSpu.BrowseCount = field.NewInt(tableName, "browse_count")
	_productSpu.Creator = field.NewString(tableName, "creator")
	_productSpu.Updater = field.NewString(tableName, "updater")
	_productSpu.CreatedAt = field.NewTime(tableName, "create_time")
	_productSpu.UpdatedAt = field.NewTime(tableName, "update_time")
	_productSpu.Deleted = field.NewField(tableName, "deleted")
	_productSpu.TenantID = field.NewInt64(tableName, "tenant_id")

	_productSpu.fillFieldMap()

	return _productSpu
}

type productSpu struct {
	productSpuDo productSpuDo

	ALL                field.Asterisk
	ID                 field.Int64  // 主键
	Name               field.String // 商品名称
	Keyword            field.String // 关键字
	Introduction       field.String // 商品简介
	Description        field.String // 商品详情
	CategoryID         field.Int64  // 商品分类编号
	BrandID            field.Int64  // 商品品牌编号
	PicURL             field.String // 商品封面图
	SliderPicURLs      field.Field  // 商品轮播图
	Sort               field.Int    // 排序字段
	Status             field.Int    // 商品状态
	SpecType           field.Bool   // 规格类型
	Price              field.Int    // 商品价格
	MarketPrice        field.Int    // 市场价
	CostPrice          field.Int    // 成本价
	Stock              field.Int    // 库存
	DeliveryTypes      field.Field  // 配送方式数组
	DeliveryTemplateID field.Int64  // 物流配置模板编号
	GiveIntegral       field.Int    // 赠送积分
	SubCommissionType  field.Bool   // 分销类型
	SalesCount         field.Int    // 商品销量
	VirtualSalesCount  field.Int    // 虚拟销量
	BrowseCount        field.Int    // 浏览量
	Creator            field.String // 创建者
	Updater            field.String // 更新者
	CreatedAt          field.Time   // 创建时间
	UpdatedAt          field.Time   // 更新时间
	Deleted            field.Field  // 是否删除
	TenantID           field.Int64  // 租户编号

	fieldMap map[string]field.Expr
}

func (p productSpu) Table(newTableName string) *productSpu {
	p.productSpuDo.UseTable(newTableName)
	return p.updateTableName(newTableName)
}

func (p productSpu) As(alias string) *productSpu {
	p.productSpuDo.DO = *(p.productSpuDo.As(alias).(*gen.DO))
	return p.updateTableName(alias)
}

func (p *productSpu) updateTableName(table string) *productSpu {
	p.ALL = field.NewAsterisk(table)
	p.ID = field.NewInt64(table, "id")
	p.Name = field.NewString(table, "name")
	p.Keyword = field.NewString(table, "keyword")
	p.Introduction = field.NewString(table, "introduction")
	p.Description = field.NewString(table, "description")
	p.CategoryID = field.NewInt64(table, "category_id")
	p.BrandID = field.NewInt64(table, "brand_id")
	p.PicURL = field.NewString(table, "pic_url")
	p.SliderPicURLs = field.NewField(table, "slider_pic_urls")
	p.Sort = field.NewInt(table, "sort")
	p.Status = field.NewInt(table, "status")
	p.SpecType = field.NewBool(table, "spec_type")
	p.Price = field.NewInt(table, "price")
	p.MarketPrice = field.NewInt(table, "market_price")
	p.CostPrice = field.NewInt(table, "cost_price")
	p.Stock = field.NewInt(table, "stock")
	p.DeliveryTypes = field.NewField(table, "delivery_types")
	p.DeliveryTemplateID = field.NewInt64(table, "delivery_template_id")
	p.GiveIntegral = field.NewInt(table, "give_integral")
	p.SubCommissionType = field.NewBool(table, "sub_commission_type")
	p.SalesCount = field.NewInt(table, "sales_count")
	p.VirtualSalesCount = field.NewInt(table, "virtual_sales_count")
	p.BrowseCount = field.NewInt(table, "browse_count")
	p.Creator = field.NewString(table, "creator")
	p.Updater = field.NewString(table, "updater")
	p.CreatedAt = field.NewTime(table, "create_time")
	p.UpdatedAt = field.NewTime(table, "update_time")
	p.Deleted = field.NewField(table, "deleted")
	p.TenantID = field.NewInt64(table, "tenant_id")

	p.fillFieldMap()

	return p
}

func (p *productSpu) WithContext(ctx context.Context) IProductSpuDo {
	return p.productSpuDo.WithContext(ctx)
}

func (p productSpu) TableName() string { return p.productSpuDo.TableName() }

func (p productSpu) Alias() string { return p.productSpuDo.Alias() }

func (p productSpu) Columns(cols ...field.Expr) gen.Columns { return p.productSpuDo.Columns(cols...) }

func (p *productSpu) GetFieldByName(fieldName string) (field.OrderExpr, bool) {
	_f, ok := p.fieldMap[fieldName]
	if !ok || _f == nil {
		return nil, false
	}
	_oe, ok := _f.(field.OrderExpr)
	return _oe, ok
}

func (p *productSpu) fillFieldMap() {
	p.fieldMap = make(map[string]field.Expr, 29)
	p.fieldMap["id"] = p.ID
	p.fieldMap["name"] = p.Name
	p.fieldMap["keyword"] = p.Keyword
	p.fieldMap["introduction"] = p.Introduction
	p.fieldMap["description"] = p.Description
	p.fieldMap["category_id"] = p.CategoryID
	p.fieldMap["brand_id"] = p.BrandID
	p.fieldMap["pic_url"] = p.PicURL
	p.fieldMap["slider_pic_urls"] = p.SliderPicURLs
	p.fieldMap["sort"] = p.Sort
	p.fieldMap["status"] = p.Status
	p.fieldMap["spec_type"] = p.SpecType
	p.fieldMap["price"] = p.Price
	p.fieldMap["market_price"] = p.MarketPrice
	p.fieldMap["cost_price"] = p.CostPrice
	p.fieldMap["stock"] = p.Stock
	p.fieldMap["delivery_types"] = p.DeliveryTypes
	p.fieldMap["delivery_template_id"] = p.DeliveryTemplateID
	p.fieldMap["give_integral"] = p.GiveIntegral
	p.fieldMap["sub_commission_type"] = p.SubCommissionType
	p.fieldMap["sales_count"] = p.SalesCount
	p.fieldMap["virtual_sales_count"] = p.VirtualSalesCount
	p.fieldMap["browse_count"] = p.BrowseCount
	p.fieldMap["creator"] = p.Creator
	p.fieldMap["updater"] = p.Updater
	p.fieldMap["create_time"] = p.CreatedAt
	p.fieldMap["update_time"] = p.UpdatedAt
	p.fieldMap["deleted"] = p.Deleted
	p.fieldMap["tenant_id"] = p.TenantID
}

func (p productSpu) clone(db *gorm.DB) productSpu {
	p.productSpuDo.ReplaceConnPool(db.Statement.ConnPool)
	return p
}

func (p productSpu) replaceDB(db *gorm.DB) productSpu {
	p.productSpuDo.ReplaceDB(db)
	return p
}

type productSpuDo struct{ gen.DO }

type IProductSpuDo interface {
	gen.SubQuery
	Debug() IProductSpuDo
	WithContext(ctx context.Context) IProductSpuDo
	WithResult(fc func(tx gen.Dao)) gen.ResultInfo
	ReplaceDB(db *gorm.DB)
	ReadDB() IProductSpuDo
	WriteDB() IProductSpuDo
	As(alias string) gen.Dao
	Session(config *gorm.Session) IProductSpuDo
	Columns(cols ...field.Expr) gen.Columns
	Clauses(conds ...clause.Expression) IProductSpuDo
	Not(conds ...gen.Condition) IProductSpuDo
	Or(conds ...gen.Condition) IProductSpuDo
	Select(conds ...field.Expr) IProductSpuDo
	Where(conds ...gen.Condition) IProductSpuDo
	Order(conds ...field.Expr) IProductSpuDo
	Distinct(cols ...field.Expr) IProductSpuDo
	Omit(cols ...field.Expr) IProductSpuDo
	Join(table schema.Tabler, on ...field.Expr) IProductSpuDo
	LeftJoin(table schema.Tabler, on ...field.Expr) IProductSpuDo
	RightJoin(table schema.Tabler, on ...field.Expr) IProductSpuDo
	Group(cols ...field.Expr) IProductSpuDo
	Having(conds ...gen.Condition) IProductSpuDo
	Limit(limit int) IProductSpuDo
	Offset(offset int) IProductSpuDo
	Count() (count int64, err error)
	Scopes(funcs ...func(gen.Dao) gen.Dao) IProductSpuDo
	Unscoped() IProductSpuDo
	Create(values ...*product.ProductSpu) error
	CreateInBatches(values []*product.ProductSpu, batchSize int) error
	Save(values ...*product.ProductSpu) error
	First() (*product.ProductSpu, error)
	Take() (*product.ProductSpu, error)
	Last() (*product.ProductSpu, error)
	Find() ([]*product.ProductSpu, error)
	FindInBatch(batchSize int, fc func(tx gen.Dao, batch int) error) (results []*product.ProductSpu, err error)
	FindInBatches(result *[]*product.ProductSpu, batchSize int, fc func(tx gen.Dao, batch int) error) error
	Pluck(column field.Expr, dest interface{}) error
	Delete(...*product.ProductSpu) (info gen.ResultInfo, err error)
	Update(column field.Expr, value interface{}) (info gen.ResultInfo, err error)
	UpdateSimple(columns ...field.AssignExpr) (info gen.ResultInfo, err error)
	Updates(value interface{}) (info gen.ResultInfo, err error)
	UpdateColumn(column field.Expr, value interface{}) (info gen.ResultInfo, err error)
	UpdateColumnSimple(columns ...field.AssignExpr) (info gen.ResultInfo, err error)
	UpdateColumns(value interface{}) (info gen.ResultInfo, err error)
	UpdateFrom(q gen.SubQuery) gen.Dao
	Attrs(attrs ...field.AssignExpr) IProductSpuDo
	Assign(attrs ...field.AssignExpr) IProductSpuDo
	Joins(fields ...field.RelationField) IProductSpuDo
	Preload(fields ...field.RelationField) IProductSpuDo
	FirstOrInit() (*product.ProductSpu, error)
	FirstOrCreate() (*product.ProductSpu, error)
	FindByPage(offset int, limit int) (result []*product.ProductSpu, count int64, err error)
	ScanByPage(result interface{}, offset int, limit int) (count int64, err error)
	Rows() (*sql.Rows, error)
	Row() *sql.Row
	Scan(result interface{}) (err error)
	Returning(value interface{}, columns ...string) IProductSpuDo
	UnderlyingDB() *gorm.DB
	schema.Tabler
}

func (p productSpuDo) Debug() IProductSpuDo {
	return p.withDO(p.DO.Debug())
}

func (p productSpuDo) WithContext(ctx context.Context) IProductSpuDo {
	return p.withDO(p.DO.WithContext(ctx))
}

func (p productSpuDo) ReadDB() IProductSpuDo {
	return p.Clauses(dbresolver.Read)
}

func (p productSpuDo) WriteDB() IProductSpuDo {
	return p.Clauses(dbresolver.Write)
}

func (p productSpuDo) Session(config *gorm.Session) IProductSpuDo {
	return p.withDO(p.DO.Session(config))
}

func (p productSpuDo) Clauses(conds ...clause.Expression) IProductSpuDo {
	return p.withDO(p.DO.Clauses(conds...))
}

func (p productSpuDo) Returning(value interface{}, columns ...string) IProductSpuDo {
	return p.withDO(p.DO.Returning(value, columns...))
}

func (p productSpuDo) Not(conds ...gen.Condition) IProductSpuDo {
	return p.withDO(p.DO.Not(conds...))
}

func (p productSpuDo) Or(conds ...gen.Condition) IProductSpuDo {
	return p.withDO(p.DO.Or(conds...))
}

func (p productSpuDo) Select(conds ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.Select(conds...))
}

func (p productSpuDo) Where(conds ...gen.Condition) IProductSpuDo {
	return p.withDO(p.DO.Where(conds...))
}

func (p productSpuDo) Order(conds ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.Order(conds...))
}

func (p productSpuDo) Distinct(cols ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.Distinct(cols...))
}

func (p productSpuDo) Omit(cols ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.Omit(cols...))
}

func (p productSpuDo) Join(table schema.Tabler, on ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.Join(table, on...))
}

func (p productSpuDo) LeftJoin(table schema.Tabler, on ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.LeftJoin(table, on...))
}

func (p productSpuDo) RightJoin(table schema.Tabler, on ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.RightJoin(table, on...))
}

func (p productSpuDo) Group(cols ...field.Expr) IProductSpuDo {
	return p.withDO(p.DO.Group(cols...))
}

func (p productSpuDo) Having(conds ...gen.Condition) IProductSpuDo {
	return p.withDO(p.DO.Having(conds...))
}

func (p productSpuDo) Limit(limit int) IProductSpuDo {
	return p.withDO(p.DO.Limit(limit))
}

func (p productSpuDo) Offset(offset int) IProductSpuDo {
	return p.withDO(p.DO.Offset(offset))
}

func (p productSpuDo) Scopes(funcs ...func(gen.Dao) gen.Dao) IProductSpuDo {
	return p.withDO(p.DO.Scopes(funcs...))
}

func (p productSpuDo) Unscoped() IProductSpuDo {
	return p.withDO(p.DO.Unscoped())
}

func (p productSpuDo) Create(values ...*product.ProductSpu) error {
	if len(values) == 0 {
		return nil
	}
	return p.DO.Create(values)
}

func (p productSpuDo) CreateInBatches(values []*product.ProductSpu, batchSize int) error {
	return p.DO.CreateInBatches(values, batchSize)
}

// Save : !!! underlying implementation is different with GORM
// The method is equivalent to executing the statement: db.Clauses(clause.OnConflict{UpdateAll: true}).Create(values)
func (p productSpuDo) Save(values ...*product.ProductSpu) error {
	if len(values) == 0 {
		return nil
	}
	return p.DO.Save(values)
}

func (p productSpuDo) First() (*product.ProductSpu, error) {
	if result, err := p.DO.First(); err != nil {
		return nil, err
	} else {
		return result.(*product.ProductSpu), nil
	}
}

func (p productSpuDo) Take() (*product.ProductSpu, error) {
	if result, err := p.DO.Take(); err != nil {
		return nil, err
	} else {
		return result.(*product.ProductSpu), nil
	}
}

func (p productSpuDo) Last() (*product.ProductSpu, error) {
	if result, err := p.DO.Last(); err != nil {
		return nil, err
	} else {
		return result.(*product.ProductSpu), nil
	}
}

func (p productSpuDo) Find() ([]*product.ProductSpu, error) {
	result, err := p.DO.Find()
	return result.([]*product.ProductSpu), err
}

func (p productSpuDo) FindInBatch(batchSize int, fc func(tx gen.Dao, batch int) error) (results []*product.ProductSpu, err error) {
	buf := make([]*product.ProductSpu, 0, batchSize)
	err = p.DO.FindInBatches(&buf, batchSize, func(tx gen.Dao, batch int) error {
		defer func() { results = append(results, buf...) }()
		return fc(tx, batch)
	})
	return results, err
}

func (p productSpuDo) FindInBatches(result *[]*product.ProductSpu, batchSize int, fc func(tx gen.Dao, batch int) error) error {
	return p.DO.FindInBatches(result, batchSize, fc)
}

func (p productSpuDo) Attrs(attrs ...field.AssignExpr) IProductSpuDo {
	return p.withDO(p.DO.Attrs(attrs...))
}

func (p productSpuDo) Assign(attrs ...field.AssignExpr) IProductSpuDo {
	return p.withDO(p.DO.Assign(attrs...))
}

func (p productSpuDo) Joins(fields ...field.RelationField) IProductSpuDo {
	for _, _f := range fields {
		p = *p.withDO(p.DO.Joins(_f))
	}
	return &p
}

func (p productSpuDo) Preload(fields ...field.RelationField) IProductSpuDo {
	for _, _f := range fields {
		p = *p.withDO(p.DO.Preload(_f))
	}
	return &p
}

func (p productSpuDo) FirstOrInit() (*product.ProductSpu, error) {
	if result, err := p.DO.FirstOrInit(); err != nil {
		return nil, err
	} else {
		return result.(*product.ProductSpu), nil
	}
}

func (p productSpuDo) FirstOrCreate() (*product.ProductSpu, error) {
	if result, err := p.DO.FirstOrCreate(); err != nil {
		return nil, err
	} else {
		return result.(*product.ProductSpu), nil
	}
}

func (p productSpuDo) FindByPage(offset int, limit int) (result []*product.ProductSpu, count int64, err error) {
	result, err = p.Offset(offset).Limit(limit).Find()
	if err != nil {
		return
	}

	if size := len(result); 0 < limit && 0 < size && size < limit {
		count = int64(size + offset)
		return
	}

	count, err = p.Offset(-1).Limit(-1).Count()
	return
}

func (p productSpuDo) ScanByPage(result interface{}, offset int, limit int) (count int64, err error) {
	count, err = p.Count()
	if err != nil {
		return
	}

	err = p.Offset(offset).Limit(limit).Scan(result)
	return
}

func (p productSpuDo) Scan(result interface{}) (err error) {
	return p.DO.Scan(result)
}

func (p productSpuDo) Delete(models ...*product.ProductSpu) (result gen.ResultInfo, err error) {
	return p.DO.Delete(models)
}

func (p *productSpuDo) withDO(do gen.Dao) *productSpuDo {
	p.DO = *do.(*gen.DO)
	return p
}
